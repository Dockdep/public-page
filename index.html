<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
        crossorigin="anonymous">
    <link rel="stylesheet" href="css/style.css">


    <link href="https://cdn.jsdelivr.net/npm/gijgo@1.9.4/combined/css/gijgo.min.css" rel="stylesheet" type="text/css" />
    <title>Hello, world!</title>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="#">Navbar</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo02" aria-controls="navbarTogglerDemo02"
            aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarTogglerDemo02">
            <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
                <li class="nav-item active">
                    <a class="nav-link" href="#">Home
                        <span class="sr-only">(current)</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Link</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link disabled" href="#">Disabled</a>
                </li>
            </ul>
            <form class="form-inline my-2 my-lg-0">
                <input class="form-control mr-sm-2" type="search" placeholder="Search">
                <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
            </form>
        </div>
    </nav>
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item">
                <a href="#">Home</a>
            </li>
            <li class="breadcrumb-item">
                <a href="#">Library</a>
            </li>
            <li class="breadcrumb-item active" aria-current="page">Data</li>
        </ol>
    </nav>
    <div id="main-content" class="container-fluid">
        <div class="row">
            <div id="tree-block" class="col-3">
                <div id="tree"></div>

            </div>
            <div class="col-6">
                <div class="article">
                    <h1>Lorem ipsum dolor sit amet.</h1>
                    <div class="meta">02/28/2018</div>
                    <div class="article-content">
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec rutrum neque a odio cursus, non sodales purus rutrum. Nam
                        fringilla, ex id malesuada pretium, turpis velit consectetur sapien, et tempor erat risus hendrerit
                        lorem. Aenean ut molestie nibh. Etiam tincidunt enim eget felis consequat rutrum et eu arcu. Morbi
                        varius massa ex. Aenean vel nulla orci. Donec a condimentum orci. Vivamus mattis dapibus turpis at
                        laoreet. Morbi efficitur magna in congue congue. Suspendisse ac augue eu nulla ornare vestibulum
                        non eget arcu. Fusce id magna non nibh porttitor tincidunt. Morbi tristique et magna sed aliquam.
                        Quisque lorem sapien, maximus at magna vitae, pretium faucibus sapien. Cras quis tempor est. In dictum
                        cursus quam, eget suscipit est ultricies eu. Morbi ac pellentesque felis. Morbi vitae tortor felis.
                        Morbi id placerat justo, a rhoncus nunc. Ut pretium volutpat risus, eget lobortis eros commodo in.
                        Aenean sapien orci, lacinia vel gravida id, luctus nec enim. Cras hendrerit turpis a libero tincidunt
                        egestas. Sed eros diam, elementum at lacus tincidunt, aliquam porta dui. Vestibulum malesuada at
                        tellus ut tempus. Duis pellentesque in erat quis scelerisque. Maecenas semper egestas tristique.
                        Quisque elementum pharetra orci id maximus. Vestibulum purus lorem, malesuada eu purus sed, finibus
                        blandit risus. Nulla pellentesque euismod felis, ac placerat mi sollicitudin ac. Etiam porta eros
                        massa, sit amet pharetra lorem imperdiet et. Nunc nec nunc ex. Maecenas quis mollis urna. In rhoncus
                        ac nulla nec scelerisque. Nullam cursus lacus est, eu malesuada enim aliquet vitae. Suspendisse nec
                        magna eget arcu feugiat consequat a ut nisi. Nam gravida vel purus laoreet malesuada. Class aptent
                        taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Sed volutpat tortor
                        ac lobortis mollis. Vestibulum id eleifend felis. Maecenas venenatis rhoncus posuere. Phasellus maximus
                        eros vitae egestas ultricies. Mauris viverra tellus turpis, vitae mollis urna pharetra ac. Sed eu
                        auctor mauris, et molestie felis. Curabitur nunc diam, dignissim at felis dapibus, tincidunt luctus
                        leo. Cras facilisis eleifend neque ullamcorper bibendum. In hac habitasse platea dictumst. Integer
                        in magna nunc. Donec blandit imperdiet massa at mattis. Nam ultrices, justo vitae auctor hendrerit,
                        ligula nibh dictum risus, ut pretium erat magna id ante. Duis malesuada eros placerat feugiat condimentum.
                        Etiam blandit sollicitudin rutrum. Integer eget metus scelerisque, eleifend arcu at, tincidunt metus.
                        Pellentesque id metus ipsum. In placerat sodales lectus, vitae suscipit elit tempor sit amet. Curabitur
                        fermentum sapien at augue sagittis, vitae posuere ipsum euismod. Suspendisse pellentesque pellentesque
                        maximus. Proin id diam ut sem aliquet ullamcorper. Morbi elit metus, egestas et gravida at, malesuada
                        vitae dui.


                    </div>
                </div>

            </div>
            <div class="col-3">
                <div>
                    <h3>Tags</h3>
                    <span class="badge badge-pill badge-default">Default</span>
                    <span class="badge badge-pill badge-primary">Primary</span>
                    <span class="badge badge-pill badge-success">Success</span>
                    <span class="badge badge-pill badge-info">Info</span>
                    <span class="badge badge-pill badge-warning">Warning</span>
                    <span class="badge badge-pill badge-danger">Danger</span>
                </div>
               
            </div>
        </div>
    </div>
    <div id="footer">

    </div>
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/gijgo@1.9.4/combined/js/gijgo.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $('#tree').tree({
                uiLibrary: 'bootstrap4',
                dataSource: 'http://localhost:3000/data.json',
                primaryKey: 'id',
                imageUrlField: 'flagUrl'
            });
            countTreeTopPosition();
        });

        window.onscroll = function () {
            countTreeTopPosition();
        }
        function countTreeTopPosition(){
            var windowScrolled = window.pageYOffset || document.documentElement.scrollTop;
            var tree = document.getElementById('tree');
            var positon = 114 - windowScrolled;
            if(positon >= 0){
                tree.style.top = positon + 'px';
            } else {
                tree.style.top = '0px';
            }
            var footer = document.getElementById('footer');
            recountTreeHeight(114, footer.offsetTop, windowScrolled, tree);
        }
        function recountTreeHeight(header, footer, windowY, treeBlock){
            var windowHeight = window.innerHeight;
            var headerRecount = windowY < header;
            var footerRecount = (windowY+windowHeight) > footer;
            var fullScreen = windowHeight > footer;
            var contentHeight = footer - 148;

            if(fullScreen){
                treeBlock.style.height = contentHeight+'px';
            }
            else if(headerRecount) {
                treeBlock.style.height = 'calc(95% - '+(header - windowY)+'px)';
            } else if(footerRecount){
                treeBlock.style.height = 'calc(95% - '+((windowY+windowHeight) - footer)+'px)';
            } else if(fullScreen){ 
                treeBlock.style.height = 'calc(95% - 155px)';
            } else {
                treeBlock.style.height = '95%';
            }
        }
    </script>
</body>

</html>